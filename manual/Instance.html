<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Instance | Cubusky Core | 1.1.0 </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Instance | Cubusky Core | 1.1.0 ">
      
      <link rel="icon" href="../manual/images/favicon.png">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      <meta name="docfx:disablenewtab" content="true">
      
      <meta name="docfx:docurl" content="https://github.com/Cubusky/com.cubusky.core/blob/main/Documentation~/manual/Instance.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../manual/images/logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="instance">Instance</h1>

<p>Singletons are a widely accepted anti-pattern within Unity, and their use is not recommended. There are however valid use cases for wanting to interact with static functions through Components.</p>
<p>The <code>Instance&lt;T&gt;</code> type provides a singleton implementation that aims to adhere to the <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle">single responsibility principle</a> by working independently from other types. Rather than referencing <code>Instance&lt;T&gt;</code> in other classes, it is used more like a state setter. An <code>Instance&lt;T&gt;</code> is supposed to manipulate static api values when it becomes the current instance. Similarly, the last known instance will set its state when the current instance is deactivated.</p>
<p>Unlike most singleton implementations that allow only 1 instance, <code>Instance&lt;T&gt;</code> does not restrict the amount of instances. Note that the last enabled <code>Instance&lt;T&gt;</code> will be the current <code>Instance&lt;T&gt;</code>.</p>
<h2 id="example">Example</h2>
<p>A simple example is a time scale setter implemented through instances.</p>
<pre><code class="lang-csharp">[DisallowMultipleComponent]
public class TimeScaleInstance : Instance&lt;TimeScaleInstance&gt;
{
    [field: SerializeField] public float timeScale { get; set; } = 1f;

    public override void OnCurrent()
    {
        Time.timeScale = timeScale;
    }
}
</code></pre>
<p><img src="images/Instance.png" alt=""></p>
<p>When our game starts, the <code>TimeScaleInstance</code> on the camera is recognized and our time scale is set to 1. When our pause screen gets enabled however, our time scale is set to 0. Then, when our pause screen gets disabled, the <code>TimeScaleInstance</code> recognizes the last known instance and resets the time scale back to 1.</p>
<p>By virtue of implementation, it becomes trivial to make a weapon select menu that puts us in slowmotion rather than stopping time completely.</p>
<p><img src="images/Instance%20Multiple.png" alt=""></p>
<h3 id="singleton">Singleton</h3>
<p>It is possible to derive from <code>Instance&lt;T&gt;</code> to create a true singleton implementation that only allows one instance at a time.</p>
<pre><code class="lang-csharp">/// &lt;summary&gt;
/// A singleton implementation where there will only ever exist 0 or 1 instances of the singleton.
/// &lt;/summary&gt;
public abstract class Singleton&lt;T&gt; : Instance&lt;T&gt; where T : Singleton&lt;T&gt;
{
    protected virtual void Awake()
    {
        if (current)
        {
            Destroy(this);
        }
        else
        {
            DontDestroyOnLoad(this);
        }
    }
}
</code></pre>
<p>However, as Cubusky only uses the singleton pattern to set static state dynamically, the above would be the same as using <a href="https://docs.unity3d.com/ScriptReference/RuntimeInitializeOnLoadMethodAttribute.html">RuntimeInitializeOnLoadMethod</a>, which is strongly recommended over the use of singletons.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/Cubusky/com.cubusky.core/blob/main/Documentation~/manual/Instance.md/#L1" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made by <a href="https://github.com/Cubusky" target="_blank">Cubusky</a> using <a href="https://dotnet.github.io/docfx" target="_blank">DocFX</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
